export const spanishCities = [
  // Comunidad de Madrid
  { name: "Madrid", region: "Comunidad de Madrid", coordinates: [-3.7038, 40.4168] },
  { name: "Móstoles", region: "Comunidad de Madrid", coordinates: [-3.8649, 40.3239] },
  { name: "Alcalá de Henares", region: "Comunidad de Madrid", coordinates: [-3.3706, 40.4815] },
  { name: "Fuenlabrada", region: "Comunidad de Madrid", coordinates: [-3.7944, 40.2844] },
  { name: "Leganés", region: "Comunidad de Madrid", coordinates: [-3.7633, 40.3167] },
  { name: "Getafe", region: "Comunidad de Madrid", coordinates: [-3.7327, 40.3058] },
  { name: "Alcorcón", region: "Comunidad de Madrid", coordinates: [-3.8248, 40.3456] },
  { name: "Torrejón de Ardoz", region: "Comunidad de Madrid", coordinates: [-3.4790, 40.4518] },
  { name: "Parla", region: "Comunidad de Madrid", coordinates: [-3.7723, 40.2377] },
  { name: "Alcobendas", region: "Comunidad de Madrid", coordinates: [-3.6338, 40.5445] },
  { name: "Las Rozas de Madrid", region: "Comunidad de Madrid", coordinates: [-3.8736, 40.4923] },
  { name: "San Sebastián de los Reyes", region: "Comunidad de Madrid", coordinates: [-3.6259, 40.5570] },
  { name: "Pozuelo de Alarcón", region: "Comunidad de Madrid", coordinates: [-3.8119, 40.4351] },
  { name: "Valdemoro", region: "Comunidad de Madrid", coordinates: [-3.6889, 40.1869] },
  { name: "Coslada", region: "Comunidad de Madrid", coordinates: [-3.5607, 40.4215] },
  { name: "Majadahonda", region: "Comunidad de Madrid", coordinates: [-3.8704, 40.4729] },
  { name: "Collado Villalba", region: "Comunidad de Madrid", coordinates: [-3.9995, 40.6335] },
  { name: "Tres Cantos", region: "Comunidad de Madrid", coordinates: [-3.7123, 40.6015] },
  { name: "Aranjuez", region: "Comunidad de Madrid", coordinates: [-3.6033, 40.0332] },
  { name: "Rivas-Vaciamadrid", region: "Comunidad de Madrid", coordinates: [-3.5317, 40.3564] },
  
  // Cataluña
  { name: "Barcelona", region: "Cataluña", coordinates: [2.1734, 41.3851] },
  { name: "Hospitalet de Llobregat", region: "Cataluña", coordinates: [2.1001, 41.3596] },
  { name: "Tarrasa (Terrassa)", region: "Cataluña", coordinates: [2.0124, 41.5633] },
  { name: "Badalona", region: "Cataluña", coordinates: [2.2479, 41.4502] },
  { name: "Sabadell", region: "Cataluña", coordinates: [2.1090, 41.5432] },
  { name: "Mataró", region: "Cataluña", coordinates: [2.4456, 41.5339] },
  { name: "Santa Coloma de Gramenet", region: "Cataluña", coordinates: [2.2084, 41.4522] },
  { name: "Reus", region: "Cataluña", coordinates: [1.1043, 41.1557] },
  { name: "Girona", region: "Cataluña", coordinates: [2.8186, 41.9794] },
  { name: "Lérida (Lleida)", region: "Cataluña", coordinates: [0.6200, 41.6176] },
  { name: "Tarragona", region: "Cataluña", coordinates: [1.2444, 41.1189] },
  { name: "Sant Cugat del Vallès", region: "Cataluña", coordinates: [2.0840, 41.4732] },
  { name: "Cornellà de Llobregat", region: "Cataluña", coordinates: [2.0774, 41.3540] },
  { name: "Sant Boi de Llobregat", region: "Cataluña", coordinates: [2.0406, 41.3429] },
  { name: "Rubí", region: "Cataluña", coordinates: [2.0336, 41.4923] },
  { name: "Cerdanyola del Vallès", region: "Cataluña", coordinates: [2.1406, 41.4912] },
  { name: "Granollers", region: "Cataluña", coordinates: [2.2879, 41.6077] },
  { name: "Figueres", region: "Cataluña", coordinates: [2.9614, 42.2677] },
  { name: "Vila-seca", region: "Cataluña", coordinates: [1.1464, 41.1067] },
  { name: "Viladecans", region: "Cataluña", coordinates: [2.0138, 41.3145] },
  { name: "Vilanova i la Geltrú", region: "Cataluña", coordinates: [1.7255, 41.2232] },
  { name: "Olot", region: "Cataluña", coordinates: [2.4889, 42.1817] },
  { name: "Martorell", region: "Cataluña", coordinates: [1.9266, 41.4729] },
  { name: "El Prat de Llobregat", region: "Cataluña", coordinates: [2.0953, 41.3276] },
  { name: "Mislata", region: "Cataluña", coordinates: [-0.4197, 39.4754] },
  { name: "Santa Perpètua de Mogoda", region: "Cataluña", coordinates: [2.1817, 41.5341] },
  { name: "Tàrrega", region: "Cataluña", coordinates: [1.1395, 41.6467] },
  { name: "Cambrils", region: "Cataluña", coordinates: [1.0599, 41.0688] },
  { name: "Igualada", region: "Cataluña", coordinates: [1.6175, 41.5789] },
  { name: "Manises", region: "Cataluña", coordinates: [-0.4671, 39.4919] },
  
  // Comunidad Valenciana
  { name: "Valencia", region: "Comunidad Valenciana", coordinates: [-0.3763, 39.4699] },
  { name: "Alicante", region: "Comunidad Valenciana", coordinates: [-0.4817, 38.3452] },
  { name: "Elche", region: "Comunidad Valenciana", coordinates: [-0.7070, 38.2699] },
  { name: "Castellón de la Plana", region: "Comunidad Valenciana", coordinates: [-0.0370, 39.9864] },
  { name: "Torrent", region: "Comunidad Valenciana", coordinates: [-0.4669, 39.4370] },
  { name: "Orihuela", region: "Comunidad Valenciana", coordinates: [-0.9429, 38.0844] },
  { name: "Gandía", region: "Comunidad Valenciana", coordinates: [-0.1662, 38.9673] },
  { name: "Torrevieja", region: "Comunidad Valenciana", coordinates: [-0.6827, 37.9787] },
  { name: "Paterna", region: "Comunidad Valenciana", coordinates: [-0.4430, 39.5048] },
  { name: "Sagunto", region: "Comunidad Valenciana", coordinates: [-0.2691, 39.6906] },
  { name: "San Vicente del Raspeig", region: "Comunidad Valenciana", coordinates: [-0.5260, 38.4026] },
  { name: "Benidorm", region: "Comunidad Valenciana", coordinates: [-0.1307, 38.5387] },
  { name: "Vila-real (Villareal)", region: "Comunidad Valenciana", coordinates: [-0.1010, 39.9373] },
  { name: "Elda", region: "Comunidad Valenciana", coordinates: [-0.7916, 38.4818] },
  { name: "Alcoy", region: "Comunidad Valenciana", coordinates: [-0.4755, 38.7048] },
  { name: "Xàtiva", region: "Comunidad Valenciana", coordinates: [-0.5180, 38.9879] },
  { name: "Novelda", region: "Comunidad Valenciana", coordinates: [-0.7617, 38.3844] },
  { name: "Villena", region: "Comunidad Valenciana", coordinates: [-0.8661, 38.6371] },
  { name: "Onteniente (Ontinyent)", region: "Comunidad Valenciana", coordinates: [-0.6070, 38.8220] },
  { name: "Dénia", region: "Comunidad Valenciana", coordinates: [0.1056, 38.8409] },
  { name: "Burriana", region: "Comunidad Valenciana", coordinates: [-0.0851, 39.8906] },
  { name: "Yecla", region: "Comunidad Valenciana", coordinates: [-1.1132, 38.6117] },
  { name: "Catarroja", region: "Comunidad Valenciana", coordinates: [-0.4067, 39.3982] },
  { name: "Meliana", region: "Comunidad Valenciana", coordinates: [-0.3191, 39.5007] },
  
  // Andalucía
  { name: "Sevilla", region: "Andalucía", coordinates: [-5.9845, 37.3891] },
  { name: "Málaga", region: "Andalucía", coordinates: [-4.4214, 36.7213] },
  { name: "Córdoba", region: "Andalucía", coordinates: [-4.7794, 37.8882] },
  { name: "Granada", region: "Andalucía", coordinates: [-3.5986, 37.1773] },
  { name: "Jerez de la Frontera", region: "Andalucía", coordinates: [-6.1373, 36.6868] },
  { name: "Almería", region: "Andalucía", coordinates: [-2.4637, 36.8381] },
  { name: "Marbella", region: "Andalucía", coordinates: [-4.8851, 36.5151] },
  { name: "Dos Hermanas", region: "Andalucía", coordinates: [-5.9204, 37.2925] },
  { name: "Algeciras", region: "Andalucía", coordinates: [-5.4526, 36.1285] },
  { name: "Jaén", region: "Andalucía", coordinates: [-3.7886, 37.7796] },
  { name: "Cádiz", region: "Andalucía", coordinates: [-6.2885, 36.5270] },
  { name: "Huelva", region: "Andalucía", coordinates: [-6.9447, 37.2614] },
  { name: "Roquetas de Mar", region: "Andalucía", coordinates: [-2.6144, 36.7644] },
  { name: "San Fernando", region: "Andalucía", coordinates: [-6.1981, 36.4614] },
  { name: "El Ejido", region: "Andalucía", coordinates: [-2.8139, 36.7755] },
  { name: "El Puerto de Santa María", region: "Andalucía", coordinates: [-6.2294, 36.5999] },
  { name: "Chiclana de la Frontera", region: "Andalucía", coordinates: [-6.1532, 36.4177] },
  { name: "Vélez-Málaga", region: "Andalucía", coordinates: [-4.1025, 36.7759] },
  { name: "Fuengirola", region: "Andalucía", coordinates: [-4.6262, 36.5397] },
  { name: "Estepona", region: "Andalucía", coordinates: [-5.1448, 36.4285] },
  { name: "Benalmádena", region: "Andalucía", coordinates: [-4.5615, 36.5989] },
  { name: "Linares", region: "Andalucía", coordinates: [-3.6346, 38.0979] },
  { name: "Sanlúcar de Barrameda", region: "Andalucía", coordinates: [-6.3515, 36.7783] },
  { name: "Motril", region: "Andalucía", coordinates: [-3.5055, 36.7448] },
  { name: "Puerto Real", region: "Andalucía", coordinates: [-6.1888, 36.5335] },
  { name: "Utrera", region: "Andalucía", coordinates: [-5.7843, 37.1843] },
  { name: "La Línea de la Concepción", region: "Andalucía", coordinates: [-5.3470, 36.1652] },
  { name: "Lucena", region: "Andalucía", coordinates: [-4.4859, 37.4089] },
  { name: "Andújar", region: "Andalucía", coordinates: [-4.0505, 38.0386] },
  { name: "Baza", region: "Andalucía", coordinates: [-2.7718, 37.4907] },
  { name: "Arcos de la Frontera", region: "Andalucía", coordinates: [-5.8088, 36.7509] },
  { name: "Morón de la Frontera", region: "Andalucía", coordinates: [-5.4517, 37.1217] },
  { name: "Antequera", region: "Andalucía", coordinates: [-4.5591, 37.0196] },
  { name: "Vélez Rubio", region: "Andalucía", coordinates: [-2.0785, 37.6389] },
  { name: "Montilla", region: "Andalucía", coordinates: [-4.6342, 37.5884] },
  { name: "Guadix", region: "Andalucía", coordinates: [-3.1396, 37.2998] },
  { name: "Lepe", region: "Andalucía", coordinates: [-7.2074, 37.2534] },
  { name: "Isla Cristina", region: "Andalucía", coordinates: [-7.3157, 37.1979] },
  { name: "Lora del Río", region: "Andalucía", coordinates: [-5.5279, 37.6561] },
  { name: "Mijas", region: "Andalucía", coordinates: [-4.6359, 36.5951] },
  { name: "Alhaurín de la Torre", region: "Andalucía", coordinates: [-4.5559, 36.6609] },
  { name: "Huércal-Overa", region: "Andalucía", coordinates: [-1.9488, 37.3940] },
  { name: "Cortegana", region: "Andalucía", coordinates: [-6.8191, 37.9228] },
  { name: "La Rinconada", region: "Andalucía", coordinates: [-5.9751, 37.4848] },
  { name: "Chiclana", region: "Andalucía", coordinates: [-6.1532, 36.4177] },
  { name: "Zafra", region: "Andalucía", coordinates: [-6.4176, 38.4255] },
  
  // Aragón
  { name: "Zaragoza", region: "Aragón", coordinates: [-0.8773, 41.6518] },
  { name: "Teruel", region: "Aragón", coordinates: [-1.1063, 40.3456] },
  { name: "Jaca", region: "Aragón", coordinates: [-0.5497, 42.5700] },
  
  // Región de Murcia
  { name: "Murcia", region: "Región de Murcia", coordinates: [-1.1307, 37.9922] },
  { name: "Cartagena", region: "Región de Murcia", coordinates: [-0.9864, 37.6006] },
  { name: "Lorca", region: "Región de Murcia", coordinates: [-1.7016, 37.6756] },
  { name: "Molina de Segura", region: "Región de Murcia", coordinates: [-1.2130, 38.0517] },
  { name: "Alcantarilla", region: "Región de Murcia", coordinates: [-1.2144, 37.9731] },
  { name: "Águilas", region: "Región de Murcia", coordinates: [-1.5863, 37.4069] },
  { name: "Cieza", region: "Región de Murcia", coordinates: [-1.4201, 38.2396] },
  
  // Islas Baleares
  { name: "Palma de Mallorca", region: "Islas Baleares", coordinates: [2.6502, 39.5696] },
  { name: "Manacor", region: "Islas Baleares", coordinates: [3.2096, 39.5697] },
  { name: "Inca", region: "Islas Baleares", coordinates: [2.9107, 39.7204] },
  { name: "Calvià", region: "Islas Baleares", coordinates: [2.5045, 39.5694] },
  { name: "Santa Eulalia del Río", region: "Islas Baleares", coordinates: [1.5348, 38.9849] },
  
  // Islas Canarias
  { name: "Las Palmas de Gran Canaria", region: "Islas Canarias", coordinates: [-15.4138, 28.1235] },
  { name: "Santa Cruz de Tenerife", region: "Islas Canarias", coordinates: [-16.2519, 28.4636] },
  { name: "San Cristóbal de La Laguna", region: "Islas Canarias", coordinates: [-16.3156, 28.4853] },
  { name: "Telde", region: "Islas Canarias", coordinates: [-15.4198, 27.9923] },
  { name: "Arona", region: "Islas Canarias", coordinates: [-16.6817, 28.0996] },
  { name: "Santa Lucía de Tirajana", region: "Islas Canarias", coordinates: [-15.5395, 27.9116] },
  { name: "San Bartolomé de Tirajana", region: "Islas Canarias", coordinates: [-15.5736, 27.9324] },
  { name: "Los Realejos", region: "Islas Canarias", coordinates: [-16.5926, 28.3876] },
  { name: "Puerto del Rosario", region: "Islas Canarias", coordinates: [-13.8628, 28.5004] },
  { name: "La Orotava", region: "Islas Canarias", coordinates: [-16.5215, 28.3907] },
  { name: "Arrecife", region: "Islas Canarias", coordinates: [-13.5477, 28.9631] },
  
  // País Vasco
  { name: "Bilbao", region: "País Vasco", coordinates: [-2.9349, 43.2627] },
  { name: "Vitoria-Gasteiz", region: "País Vasco", coordinates: [-2.6734, 42.8467] },
  { name: "San Sebastián", region: "País Vasco", coordinates: [-1.9812, 43.3183] },
  { name: "Barakaldo", region: "País Vasco", coordinates: [-2.9882, 43.2982] },
  { name: "Portugalete", region: "País Vasco", coordinates: [-3.0191, 43.3190] },
  { name: "Santurtzi", region: "País Vasco", coordinates: [-3.0325, 43.3290] },
  { name: "Bermeo", region: "País Vasco", coordinates: [-2.7214, 43.4205] },
  { name: "Irún", region: "País Vasco", coordinates: [-1.7895, 43.3378] },
  
  // Galicia
  { name: "Vigo", region: "Galicia", coordinates: [-8.7207, 42.2406] },
  { name: "La Coruña (A Coruña)", region: "Galicia", coordinates: [-8.3959, 43.3623] },
  { name: "Santiago de Compostela", region: "Galicia", coordinates: [-8.5448, 42.8805] },
  { name: "Ourense", region: "Galicia", coordinates: [-7.8649, 42.3360] },
  { name: "Lugo", region: "Galicia", coordinates: [-7.5567, 43.0097] },
  { name: "Ferrol", region: "Galicia", coordinates: [-8.2336, 43.4840] },
  { name: "Pontevedra", region: "Galicia", coordinates: [-8.6435, 42.4296] },
  { name: "Villagarcía de Arosa", region: "Galicia", coordinates: [-8.7711, 42.5967] },
  { name: "Vilagarcía de Arousa", region: "Galicia", coordinates: [-8.7711, 42.5967] },
  
  // Asturias
  { name: "Gijón", region: "Asturias", coordinates: [-5.6615, 43.5322] },
  { name: "Oviedo", region: "Asturias", coordinates: [-5.8442, 43.3602] },
  { name: "Avilés", region: "Asturias", coordinates: [-5.9249, 43.5565] },
  { name: "Siero", region: "Asturias", coordinates: [-5.6615, 43.3864] },
  
  // Castilla y León
  { name: "Valladolid", region: "Castilla y León", coordinates: [-4.7245, 41.6523] },
  { name: "Burgos", region: "Castilla y León", coordinates: [-3.7026, 42.3439] },
  { name: "Salamanca", region: "Castilla y León", coordinates: [-5.6635, 40.9701] },
  { name: "León", region: "Castilla y León", coordinates: [-5.5671, 42.5987] },
  { name: "Segovia", region: "Castilla y León", coordinates: [-4.1273, 40.9429] },
  { name: "Ávila", region: "Castilla y León", coordinates: [-4.6956, 40.6564] },
  { name: "Palencia", region: "Castilla y León", coordinates: [-4.5288, 42.0098] },
  { name: "Miranda de Ebro", region: "Castilla y León", coordinates: [-2.9463, 42.6868] },
  { name: "Medina del Campo", region: "Castilla y León", coordinates: [-4.9181, 41.3064] },
  
  // Cantabria
  { name: "Santander", region: "Cantabria", coordinates: [-3.8044, 43.4623] },
  
  // Navarra
  { name: "Pamplona", region: "Navarra", coordinates: [-1.6440, 42.8125] },
  { name: "Estella-Lizarra", region: "Navarra", coordinates: [-2.0267, 42.6719] },
  { name: "Tafalla", region: "Navarra", coordinates: [-1.6772, 42.5300] },
  
  // La Rioja
  { name: "Logroño", region: "La Rioja", coordinates: [-2.4450, 42.4627] },
  { name: "Haro", region: "La Rioja", coordinates: [-2.8458, 42.5840] },
  
  // Extremadura
  { name: "Badajoz", region: "Extremadura", coordinates: [-6.9706, 38.8794] },
  { name: "Cáceres", region: "Extremadura", coordinates: [-6.3724, 39.4753] },
  { name: "Mérida", region: "Extremadura", coordinates: [-6.3375, 38.9165] },
  { name: "Don Benito", region: "Extremadura", coordinates: [-5.8607, 38.9597] },
  
  // Castilla-La Mancha
  { name: "Albacete", region: "Castilla-La Mancha", coordinates: [-1.8585, 38.9942] },
  { name: "Toledo", region: "Castilla-La Mancha", coordinates: [-4.0244, 39.8628] },
  { name: "Guadalajara", region: "Castilla-La Mancha", coordinates: [-3.1615, 40.6319] },
  { name: "Talavera de la Reina", region: "Castilla-La Mancha", coordinates: [-4.8305, 39.9634] },
  { name: "Valdepeñas", region: "Castilla-La Mancha", coordinates: [-3.3761, 38.7607] },
  { name: "Alcázar de San Juan", region: "Castilla-La Mancha", coordinates: [-3.2088, 39.3899] },
  
  // Ciudades Autónomas
  { name: "Melilla", region: "Melilla", coordinates: [-2.9385, 35.2919] },
  { name: "Ceuta", region: "Ceuta", coordinates: [-5.3162, 35.8894] },
];

export const getSpanishCitiesByRegion = () => {
  const citiesByRegion: { [key: string]: typeof spanishCities } = {};
  
  spanishCities.forEach(city => {
    if (!citiesByRegion[city.region]) {
      citiesByRegion[city.region] = [];
    }
    citiesByRegion[city.region].push(city);
  });
  
  return citiesByRegion;
};

export const searchSpanishCities = (query: string) => {
  if (!query) return [];
  
  const results = spanishCities.filter(city => 
    city.name.toLowerCase().includes(query.toLowerCase()) ||
    city.region.toLowerCase().includes(query.toLowerCase())
  );

  // Si no hay resultados exactos y el usuario está buscando algo específico,
  // sugerimos que puede añadir esa ciudad
  if (results.length === 0 && query.length > 2) {
    return [{
      name: query,
      region: "Ciudad personalizada",
      coordinates: [-3.7038, 40.4168] // Coordenadas por defecto (Madrid)
    }];
  }
  
  return results.slice(0, 10); // Limitar a 10 resultados
};

export const addCustomCity = (cityName: string, region: string = "Ciudad personalizada", coordinates: [number, number] = [-3.7038, 40.4168]) => {
  const newCity = { name: cityName, region, coordinates };
  
  // Verificar si la ciudad ya existe
  const exists = spanishCities.find(city => 
    city.name.toLowerCase() === cityName.toLowerCase()
  );
  
  if (!exists) {
    spanishCities.push(newCity);
  }
  
  return newCity;
};